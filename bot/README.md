# Telegram PDF/Photo AI Bot

–≠—Ç–æ—Ç –±–æ—Ç –ø—Ä–∏–Ω–∏–º–∞–µ—Ç PDF –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∏–∑–≤–ª–µ–∫–∞–µ—Ç –∏–∑ –Ω–∏—Ö —Ç–µ–∫—Å—Ç, –¥–µ–ª–∞–µ—Ç –∫—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é AI, –∞ —Ç–∞–∫–∂–µ —É–º–µ–µ—Ç –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –æ–±—ã—á–Ω—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.  
–í—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –∏ –∏—Å—Ö–æ–¥—è—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ PostgreSQL.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- üìÑ –ü—Ä–∏–Ω–∏–º–∞–µ—Ç PDF, –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–ª–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —á–µ—Ä–µ–∑ OCR (Tesseract)
- üñº –†–∞—Å–ø–æ–∑–Ω–∞—ë—Ç —Ç–µ–∫—Å—Ç —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (rus + eng)
- ü§ñ –î–µ–ª–∞–µ—Ç –∫—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å –ø–æ–º–æ—â—å—é AI API
- üí¨ –û–±—â–∞–µ—Ç—Å—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –≤ —á–∞—Ç–µ
- üíæ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π –≤ PostgreSQL

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/username/project.git
cd project
```
### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
–£–±–µ–¥–∏—Å—å, —á—Ç–æ —É —Ç–µ–±—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Python 3.9+
```bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
pip install -r requirements.txt
```
### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Tesseract OCR
Windows
–°–∫–∞—á–∞—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
https://github.com/UB-Mannheim/tesseract/wiki

Linux (Debian/Ubuntu)
```bash
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
sudo apt update
sudo apt install tesseract-ocr
```
### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ .env.example –≤ .env:
```bash
cp .env.example .env
```
–∏–ª–∏ —á–µ—Ä–µ–∑ cmd
```bash
copy .env.example .env
```
–ó–∞–ø–æ–ª–Ω–∏—Ç–µ .env —Å–≤–æ–∏–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏ –∏ –ø–∞—Ä–æ–ª—è–º–∏.

### 5. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
```bash
docker compose up -d --build
```
### 6. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
–ü–æ–¥–æ–∂–¥—ë–º, –ø–æ–∫–∞ Postgres –ø–æ–¥–Ω–∏–º–µ—Ç—Å—è, –∏ –ø—Ä–∏–º–µ–Ω–∏–º migrations/init.sql:
```bash
docker exec -it ai_telegram_bot-db-1 bash -lc 'until pg_isready -U user -d mybotdb; do sleep 1; done; psql -U user -d mybotdb -f /migrations/init.sql'
```
### 7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ –±–æ—Ç–∞
```bash
docker logs -f telegram_bot
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
### 1. –£—Å—Ç–∞–Ω–æ–≤–∏ PostgreSQL
### 2. –°–æ–∑–¥–∞–π –±–∞–∑—É:
```bash
psql -U postgres -c "CREATE DATABASE bot_db;"
```
### 3. –í—ã–ø–æ–ª–Ω–∏ SQL-—Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü:
```bash
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    telegram_id BIGINT UNIQUE NOT NULL,
    username TEXT,
    first_name TEXT,
    last_name TEXT
);

CREATE TABLE user_messages (
    id SERIAL PRIMARY KEY,
    user_id INT REFERENCES users(id) ON DELETE CASCADE,
    message_text TEXT
);

CREATE TABLE bot_responses (
    id SERIAL PRIMARY KEY,
    user_message_id INT REFERENCES user_messages(id) ON DELETE CASCADE,
    response_text TEXT
);
```
## –ó–∞–ø—É—Å–∫
```bash
python bot.py
```

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ Docker:
```bash
docker build -t pdf-ai-bot .
docker run --env-file .env pdf-ai-bot
```
## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
/start ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∫–Ω–æ–ø–∫–∏

/help ‚Äî —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥

/info ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

–û—Ç–ø—Ä–∞–≤—å PDF ‚Äî –±–æ—Ç —Å–¥–µ–ª–∞–µ—Ç –∫—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ

–û—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ç–æ —Å —Ç–µ–∫—Å—Ç–æ–º ‚Äî –±–æ—Ç —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏ —Å–¥–µ–ª–∞–µ—Ç –∫—Ä–∞—Ç–∫–æ–µ –∏–∑–ª–æ–∂–µ–Ω–∏–µ

–ù–∞–ø–∏—à–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äî –±–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç, –∫–∞–∫ —á–∞—Ç-–±–æ—Ç

## –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
Python 3

pyTelegramBotAPI

PostgreSQL

PyMuPDF (fitz)

Tesseract OCR

Requests (–¥–ª—è AI API)

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

bot/ ‚Äî –∫–æ–¥ Telegram-–±–æ—Ç–∞

migrations/ ‚Äî SQL-—Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü

docker-compose.yml ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤ Docker

Dockerfile ‚Äî —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ –±–æ—Ç–∞

.env.example ‚Äî –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

users ‚Äî –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

user_messages ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

bot_responses ‚Äî –æ—Ç–≤–µ—Ç—ã –±–æ—Ç–∞

# –í–∞–∂–Ω–æ

–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Å–≤–æ–π —Ä–µ–∞–ª—å–Ω—ã–π .env –∏ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

## –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π —Å–≤–æ–±–æ–¥–Ω–æ, –Ω–æ —É–∫–∞–∑—ã–≤–∞–π –∞–≤—Ç–æ—Ä–∞.